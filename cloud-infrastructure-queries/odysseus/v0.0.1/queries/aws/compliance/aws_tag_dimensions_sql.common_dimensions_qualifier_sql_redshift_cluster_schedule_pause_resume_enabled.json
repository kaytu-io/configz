{
  "ID": "aws_tag_dimensions_sql.common_dimensions_qualifier_sql_redshift_cluster_schedule_pause_resume_enabled",
  "Engine": "odysseus-v0.0.1",
  "QueryToExecute": "  with cluster_pause_enabled as (\n  select\n    arn,\n    s -\u003e 'TargetAction' -\u003e 'PauseCluster' -\u003e\u003e 'ClusterIdentifier' as pause_cluster\n  from\n    aws_redshift_cluster,\n    jsonb_array_elements(scheduled_actions) as s\n  where\n    s -\u003e 'TargetAction' -\u003e 'PauseCluster' -\u003e\u003e 'ClusterIdentifier' is not null\n),\ncluster_resume_enabled as (\n  select\n    arn,\n    s -\u003e 'TargetAction' -\u003e 'ResumeCluster' -\u003e\u003e 'ClusterIdentifier' as resume_cluster\n  from\n    aws_redshift_cluster,\n    jsonb_array_elements(scheduled_actions) as s\n  where\n    s -\u003e 'TargetAction' -\u003e 'ResumeCluster' -\u003e\u003e 'ClusterIdentifier' is not null\n),\npause_and_resume_enabled as (\n  select\n    p.arn\n  from\n    cluster_pause_enabled as p\n    left join cluster_resume_enabled as r on r.arn = p.arn\n  where\n    p.pause_cluster = r.resume_cluster\n)\nselect\n  a.arn as resource,\n  case\n    when b.arn is not null then 'ok'\n    else 'info'\n  end as status,\n  case\n    when b.arn is not null then a.title || ' pause-resume action enabled.'\n    else a.title || ' pause-resume action not enabled.'\n  end as reason\n    \n    , a.region, a.account_id\nfrom\n  aws_redshift_cluster as a\n  left join pause_and_resume_enabled as b on a.arn = b.arn;\n",
  "Connector": "AWS",
  "PrimaryTable": "aws_redshift_cluster",
  "ListOfTables": [
    "aws_redshift_cluster"
  ]
}