{
  "ID": "aws_tag_dimensions_sql.common_dimensions_sql_route53_health_check_unused",
  "Engine": "odysseus-v0.0.1",
  "QueryToExecute": "with health_check as (\n  select\n    r.health_check_id as health_check_id\n  from\n    aws_route53_zone as z,\n    aws_route53_record as r\n  where\n    r.zone_id = z.id\n)\nselect\n  'arn:' || h.partition || ':route53:::healthcheck/' || h.id as resource,\n  case\n    when c.health_check_id is null then 'alarm'\n    else 'ok'\n  end as status,\n  case\n    when c.health_check_id is null then h.title || ' is unnecessary.'\n    else h.title || ' is necessary.'\n  end as reason\n  \n  , region, account_id\nfrom\n  aws_route53_health_check as h\n  left join health_check as c on h.id = c.health_check_id;\n",
  "Connector": "AWS",
  "PrimaryTable": "aws_route53_health_check",
  "ListOfTables": [
    "aws_route53_health_check",
    "aws_route53_record",
    "aws_route53_zone"
  ]
}