{
  "ID": "aws_tag_dimensions_sql.common_dimensions_qualifier_sql_ec2_gateway_lb_unused",
  "Engine": "odysseus-v0.0.1",
  "QueryToExecute": "with target_resource as (\n  select\n    load_balancer_arn,\n    target_health_descriptions,\n    target_type\n  from\n    aws_ec2_target_group,\n    jsonb_array_elements_text(load_balancer_arns) as load_balancer_arn\n)\nselect\n  a.arn as resource,\n  case\n    when jsonb_array_length(b.target_health_descriptions) = 0 then 'alarm'\n    else 'ok'\n  end as status,\n  case\n    when jsonb_array_length(b.target_health_descriptions) = 0 then a.title || ' has no target registered.'\n    else a.title || ' has registered target of type' || ' ' || b.target_type || '.'\n  end as reason\n  \n  , a.region, a.account_id\nfrom\n  aws_ec2_gateway_load_balancer a\n  left join target_resource b on a.arn = b.load_balancer_arn;\n",
  "Connector": "AWS",
  "PrimaryTable": "aws_ec2_gateway_load_balancer",
  "ListOfTables": [
    "aws_ec2_gateway_load_balancer",
    "aws_ec2_target_group"
  ]
}